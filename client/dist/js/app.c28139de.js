(function(){var e={3345:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(6265),o=n.n(a);const s="http://localhost:5000/api/accounts";class r{static async getAccountByUsername(e){const t=await o().get(`${s}/username/${e}`);return t.data}static async getAccountUsernames(){const e=await o().get(`${s}/usernames`);return e.data}static async getAccountByID(e){const t=await o().get(`${s}/id/${e}`);return t.data}static async addAccount(e){const t=await o().post(s,e);return t.data}static async deleteAccount(e){const t=await o()["delete"](`${s}/${e}`);return t.data}static async updateAccount(e,t){const n=await o().patch(`${s}/${e}`,t);return n.data}}},5037:function(e,t,n){"use strict";var a=n(9242),o=n(3396),s=n(7718);function r(e,t,n,a,r,i){const c=(0,o.up)("login-page"),u=(0,o.up)("application");return(0,o.wg)(),(0,o.j4)(s.q,{id:"inspire"},{default:(0,o.w5)((()=>[0==e.userLogOn?((0,o.wg)(),(0,o.j4)(c,{key:0,onLogin:i.login},null,8,["onLogin"])):(0,o.kq)("",!0),1==e.userLogOn?((0,o.wg)(),(0,o.j4)(u,{key:1,onLogout:t[0]||(t[0]=t=>e.userLogOn=!1),onUpdateAccount:i.updateAccount,account:e.account},null,8,["onUpdateAccount","account"])):(0,o.kq)("",!0)])),_:1})}var i=n(7139),c=n(8796),u=n(9156),l=n(652),d=n(4075),m=n(9234),p=n(3289),g=n(1285),f=n(3150),h=n(1392),w=n(2127),y=n(8275),v=n(7288),b=n(3140),k=n(7033),_=n(5030);const C=(0,o.Uk)("Menu"),U=(0,o.Uk)(" Log Out"),W=(0,o.Uk)(" MoMa"),O={class:"account-username"};function A(e,t,n,r,A,V){const j=(0,o.up)("socket-io-message"),$=(0,o.up)("router-view"),P=(0,o.up)("app-dialog");return(0,o.wg)(),(0,o.j4)(s.q,{id:"inspire"},{default:(0,o.w5)((()=>[(0,o.Wm)(k.V,{modelValue:e.drawer,"onUpdate:modelValue":t[1]||(t[1]=t=>e.drawer=t),app:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f.l,{lines:"two"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.R,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w.V,null,{default:(0,o.w5)((()=>[C])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d.J),(0,o.Wm)(y.i,{density:"compact"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.items,((t,n)=>((0,o.wg)(),(0,o.j4)(f.l,{key:n,value:t,"active-color":"primary","input-value":e.selectedItem,onClick:e=>V.pushRoute(t.routeName,t.params)},{default:(0,o.w5)((()=>[(0,o.Wm)(v.U,{start:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.t,{icon:t.icon},null,8,["icon"])])),_:2},1024),(0,o.Wm)(w.V,{textContent:(0,i.zw)(t.title)},null,8,["textContent"])])),_:2},1032,["value","input-value","onClick"])))),128))])),_:1}),(0,o.Wm)(d.J),(0,o.Wm)(f.l,{class:"clickable",onClick:t[0]||(t[0]=(0,a.iM)((e=>this.$refs.dialog.open()),["prevent"])),"selected-item":e.selectedItem},{default:(0,o.w5)((()=>[(0,o.Wm)(v.U,{start:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.t,{icon:"mdi-logout-variant"})])),_:1}),(0,o.Wm)(w.V,{text:"'Log Out'"},{default:(0,o.w5)((()=>[U])),_:1})])),_:1},8,["selected-item"])])),_:1},8,["modelValue"]),(0,o.Wm)(c.L,{app:"",class:"fixed-bar",fixed:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u.g,{onClick:t[2]||(t[2]=t=>e.drawer=!e.drawer)}),(0,o.Wm)(_.q,{onClick:V.openHomeView,class:"toolbar-title clickable"},{default:(0,o.w5)((()=>[W])),_:1},8,["onClick"]),(0,o.Wm)(m.C),(0,o._)("div",{class:"clickable",onClick:t[3]||(t[3]=(...e)=>V.openAccountView&&V.openAccountView(...e))},[(0,o._)("p",O,(0,i.zw)(n.account.username),1)]),(0,o.Wm)(l.V,{size:"40",class:"account-image clickable",readonly:"",onClick:V.openAccountView},{default:(0,o.w5)((()=>[(0,o.Wm)(g.f,{src:`http://localhost:5000/${n.account.image}`},null,8,["src"])])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(b.O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,{username:this.$props.account.username,onUpdate:t[4]||(t[4]=t=>e.updateChild=!e.updateChild),ref:"socket"},null,8,["username"]),(0,o.Wm)($,{onLogout:t[5]||(t[5]=e=>this.$emit("logout")),onUpdateAccount:V.updateAccount,update:e.updateChild,onUpdated:t[6]||(t[6]=t=>e.$refs.socket.emit("updated"))},null,8,["onUpdateAccount","update"])])),_:1}),(0,o.Wm)(P,{text:e.logOutMessage,ref:"dialog",onConfirm:V.logOut},null,8,["text","onConfirm"])])),_:1})}var V=n(9172);const j={key:0,style:{width:"100%","background-color":"white",color:"brown"}},$=(0,o.Uk)("mdi-alert");function P(e,t,n,a,s,r){return s.message?((0,o.wg)(),(0,o.iD)("div",j,[(0,o.Wm)(p.t,{color:"warning"},{default:(0,o.w5)((()=>[$])),_:1}),(0,o.Uk)(" Â  "+(0,i.zw)(s.message),1)])):(0,o.kq)("",!0)}var L=n(8993),M={props:["username"],data(){return{message:"",socket:{}}},created(){this.socket=(0,L.ZP)("http://localhost:3000"),this.socket.emit("roomUser",this.$props.username)},mounted(){this.socket.on("serverMessage",(e=>{"high"==e.priority?this.message=e.message:(console.log(e),this.$emit("update"))}))},methods:{emit(e){this.socket.emit("clientMessage",{username:this.$props.username,message:e})}}},x=n(89);const S=(0,x.Z)(M,[["render",P]]);var E=S,q={props:{account:Object},data:e=>({drawer:null,selectedItem:[2],items:[{title:"Categories",icon:"mdi-shopping",routeName:"home",params:{username:e.account.username,updateChild:e.updateChild}},{title:"Wallets",icon:"mdi-wallet",routeName:"wallets",params:{username:e.account.username}},{title:"Transactions",icon:"mdi-cash-register",routeName:"transactions",params:{username:e.account.username}},{title:"Account",icon:"mdi-account",routeName:"account",params:{username:e.account.username}}],logOutMessage:"Are you sure you want to logout? all the unsaved changes will be deleted",dialog:!1,updateChild:!1}),components:{appDialog:V.Z,socketIoMessage:E},methods:{updateAccount(e){this.$emit("update-account",e)},logOut(){this.$emit("logout")},openHomeView(){this.selectedItem=1,this.$router.push({name:"home",params:{username:this.account.username}})},openAccountView(){this.selectedItem=4,this.$router.push({name:"account",params:{username:this.account.username}})},pushRoute(e,t){this.$router.push({name:e,params:t})}}};const I=(0,x.Z)(q,[["render",A],["__scopeId","data-v-7ed4954c"]]);var N=I,T=n(3909),Z=n(5101),D=n(1489),z=n(6572),F=n(6422),R=n(3369),B=n(6824),H=n(8521),J=n(2902);const K=e=>((0,o.dD)("data-v-6625acc8"),e=e(),(0,o.Cn)(),e),G=K((()=>(0,o._)("br",null,null,-1))),Y={key:0,for:"file-upload"},Q=["rules"],X=K((()=>(0,o._)("br",null,null,-1))),ee={href:"",class:"change-login-page"};function te(e,t,n,r,c,u){return(0,o.wg)(),(0,o.j4)(s.q,{style:(0,i.j5)(c.moneyImage)},{default:(0,o.w5)((()=>[(0,o.Wm)(R.K,{class:"container"},{default:(0,o.w5)((()=>[(0,o.Wm)(B.o,{"no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(H.D,{sm:"10",class:"mx-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(D._,{class:"pa-5"},{default:(0,o.w5)((()=>[(0,o.Wm)(z.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(c.loginView?"Login":"Sign Up"),1)])),_:1}),(0,o.Wm)(d.J),G,c.loginView?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("label",Y,[(0,o.Wm)(l.V,{size:"100",class:"custom-file-upload clickable account-image",rules:c.rules,readonly:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g.f,{src:c.imageUrl},null,8,["src"])])),_:1},8,["rules"])])),(0,o._)("input",{id:"file-upload",type:"file",onChange:t[0]||(t[0]=(...e)=>u.selectedFile&&u.selectedFile(...e)),rules:c.rules},null,40,Q),(0,o.Wm)(F.O,{ref:"form",onSubmit:(0,a.iM)(u.submitForm,["prevent"]),class:"pa-5",enctype:"multipart/form-data"},{default:(0,o.w5)((()=>[(0,o.Wm)(J.h,{label:"Username",modelValue:c.account.username,"onUpdate:modelValue":t[1]||(t[1]=e=>c.account.username=e),"prepend-icon":"mdi-account",rules:c.rules},null,8,["modelValue","rules"]),(0,o.Wm)(J.h,{type:"password",label:"Password",modelValue:c.account.password,"onUpdate:modelValue":t[2]||(t[2]=e=>c.account.password=e),"prepend-icon":"mdi-key",rules:c.rules},null,8,["modelValue","rules"]),c.loginView?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(J.h,{key:0,type:"password",label:"Repeat Password",modelValue:c.repeatedPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>c.repeatedPassword=e),"prepend-icon":"mdi-key",rules:c.rules},null,8,["modelValue","rules"])),c.message?((0,o.wg)(),(0,o.j4)(T.w,{key:1,"close-text":"Close Alert",color:c.messageColor,light:"",dismissible:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(c.message),1)])),_:1},8,["color"])):(0,o.kq)("",!0),X,(0,o.Wm)(H.D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B.o,null,{default:(0,o.w5)((()=>[(0,o._)("div",{class:"change-login-page-container",onClick:t[4]||(t[4]=(0,a.iM)(((...e)=>u.changePage&&u.changePage(...e)),["prevent"]))},[(0,o._)("a",ee,(0,i.zw)("Go to "+(c.loginView?"Sign Up":"Login")),1)]),(0,o.Wm)(m.C),(0,o.Wm)(Z.T,{type:"submit",class:"mt-3",color:c.loginView?"success":"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(c.loginView?"Login":"Sign Up"),1)])),_:1},8,["color"])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])}n(6699);var ne=n(3345),ae=n(8082),oe=n.n(ae),se={data(){return{loginView:!0,message:"",messageColor:"",rules:[e=>!!e||"This field is required!"],account:{username:"",password:"",image:""},accountUsernames:[],repeatedPassword:"",image:"",moneyImage:{backgroundImage:n(7922)},imageUrl:"@/assets/logo.png"}},async created(){this.accountUsernames=await ne.Z.getAccountUsernames()},mounted(){this.imageUrl=n(2315)},computed:{imageName:{get(){return this.image?this.image.name:this.account.image}}},methods:{changePage(){this.image="",this.message="",this.imageUrl=n(2315),this.account={username:"",password:"",image:""},this.loginView=!this.loginView},selectedFile(e){this.image=e.target.files[0],this.imageUrl=URL.createObjectURL(e.target.files[0])},async submitForm(){this.loginView?this.login():this.SignUp()},async login(){if(""!=this.account.username&&""!=this.account.password)try{const e=await ne.Z.getAccountByUsername(this.account.username);oe().AES.decrypt(e[0].password,"pippo").toString(oe().enc.Utf8)==this.account.password?(this.account.image=e[0].image,this.$emit("login",e[0])):(this.message="Username and/or password incorrect",this.messageColor="orange lighten-1")}catch(e){this.message="Username and/or password incorrect",this.messageColor="orange lighten-1"}},async SignUp(){if(this.account.password!=this.repeatedPassword)this.message="Passwords do not match",this.messageColor="warning";else if(""==this.image)this.message="Choose an image for the account",this.messageColor="warning";else if(this.accountUsernames.includes(this.account.username))this.message="Chosen username is already in use",this.messageColor="warning";else{const n=new FormData;n.append("image",this.image);var e=oe().AES.encrypt(this.account.password,"pippo").toString();if(n.append("username",this.account.username),n.append("password",e),""!=this.account.username&&""!=this.account.password&&this.$refs.form.validate())try{await ne.Z.addAccount(n);this.changePage(),this.message="Account created successfully",this.messageColor="green accent-2"}catch(t){this.message="An error Occurred",this.messageColor="red lighten-1"}}}}};const re=(0,x.Z)(se,[["render",te],["__scopeId","data-v-6625acc8"]]);var ie=re,ce={data:()=>({userLogOn:!1,account:{}}),components:{application:N,"login-page":ie},methods:{updateAccount(e){this.account=e},login(e){this.userLogOn=!0,this.account=e,this.$router.push({name:"home",params:{username:this.account.username}})}}};const ue=(0,x.Z)(ce,[["render",r]]);var le=ue,de=n(678);const me=[{path:"/categories/:username",name:"home",component:()=>n.e(443).then(n.bind(n,9523))},{path:"/add-category/*",name:"add-category",component:()=>n.e(443).then(n.bind(n,4692))},{path:"/edit-category/*",name:"edit-category",component:()=>n.e(443).then(n.bind(n,6750))},{path:"/wallets/:username",name:"wallets",component:()=>n.e(443).then(n.bind(n,6175))},{path:"/add-wallet/*",name:"add-wallet",component:()=>n.e(443).then(n.bind(n,8084))},{path:"/transactions/*",name:"transactions",component:()=>n.e(443).then(n.bind(n,4039))},{path:"/add-transaction/*",name:"add-transaction",component:()=>n.e(443).then(n.bind(n,7359))},{path:"/account/:username",name:"account",component:()=>n.e(443).then(n.bind(n,1025))}],pe=(0,de.p7)({history:(0,de.PO)("/"),routes:me});var ge=pe,fe=(n(9773),n(8957)),he=n(6755),we=n(8600),ye=(0,fe.Rd)(he,we);async function ve(){const e=await n.e(461).then(n.t.bind(n,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}ve(),(0,a.ri)(le).use(ge).use(ye).mount("#app")},9172:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var a=n(3396),o=n(9242),s=n(7139),r=n(5101),i=n(1489),c=n(1888),u=n(1334),l=n(4075),d=n(9234);const m=(0,a.Uk)(" Back "),p=(0,a.Uk)(" Confirm ");function g(e,t,n,g,f,h){return 1==f.dialog?((0,a.wg)(),(0,a.iD)("div",{key:0,id:"overlay",onClick:t[1]||(t[1]=e=>h.close())},[(0,a.Wm)(i._,{width:"50%",class:"mx-auto",onClick:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(c.Z,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(n.text),1)])),_:1}),(0,a.Wm)(l.J),(0,a.Wm)(u.h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r.T,{color:"success",flat:"",onClick:h.close},{default:(0,a.w5)((()=>[m])),_:1},8,["onClick"]),(0,a.Wm)(d.C),(0,a.Wm)(r.T,{color:"error",flat:"",onClick:h.accept},{default:(0,a.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})])),_:1})])):(0,a.kq)("",!0)}var f={props:["text"],data(){return{dialog:!1}},methods:{open(){this.dialog=!0},accept(){this.$emit("confirm"),this.dialog=!1},close(){this.dialog=!1}}},h=n(89);const w=(0,h.Z)(f,[["render",g],["__scopeId","data-v-2bde9729"]]);var y=w},7922:function(e,t,n){"use strict";e.exports=n.p+"img/download.95b1cfbb.jpg"},2315:function(e,t,n){"use strict";e.exports=n.p+"img/user.f1104ac7.png"},2480:function(){}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,s){if(!a){var r=1/0;for(l=0;l<e.length;l++){a=e[l][0],o=e[l][1],s=e[l][2];for(var i=!0,c=0;c<a.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(i=!1,s<r&&(r=s));if(i){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[a,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(a,o){if(1&o&&(a=this(a)),8&o)return a;if("object"===typeof a&&a){if(4&o&&a.__esModule)return a;if(16&o&&"function"===typeof a.then)return a}var s=Object.create(null);n.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&a;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){r[e]=function(){return a[e]}}));return r["default"]=function(){return a},n.d(s,r),s}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+{443:"about",461:"webfontloader"}[e]+"."+{443:"17bc7d7e",461:"32211e83"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/about.6bd111c7.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="MoMa:";n.l=function(a,o,s,r){if(e[a])e[a].push(o);else{var i,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+s){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+s),i.src=a),e[a]=[o];var m=function(t,n){i.onerror=i.onload=null,clearTimeout(p);var o=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,a){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=function(s){if(o.onerror=o.onload=null,"load"===s.type)n();else{var r=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=i,o.parentNode.removeChild(o),a(c)}};return o.onerror=o.onload=s,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var r=document.getElementsByTagName("style");for(a=0;a<r.length;a++){o=r[a],s=o.getAttribute("data-href");if(s===e||s===t)return o}},a=function(a){return new Promise((function(o,s){var r=n.miniCssF(a),i=n.p+r;if(t(r,i))return o();e(a,i,o,s)}))},o={143:0};n.f.miniCss=function(e,t){var n={443:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var s=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=s);var r=n.p+n.u(t),i=new Error,c=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",i.name="ChunkLoadError",i.type=s,i.request=r,o[1](i)}};n.l(r,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,r=a[0],i=a[1],c=a[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var l=c(n)}for(t&&t(a);u<r.length;u++)s=r[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},a=self["webpackChunkMoMa"]=self["webpackChunkMoMa"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5037)}));a=n.O(a)})();
//# sourceMappingURL=app.c28139de.js.map